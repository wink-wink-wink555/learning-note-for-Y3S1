原题：如果有简化的DES版本，其明文输入为8比特，初始置换表IP如下IP:26314857
请给出其逆初始置换表。
解题过程：假设原文为:abcdefgh经IP后M,，变为:bfcadheg
逆初始置换与初始置换是互逆，即把M，重新变为M。答：IP逆初始置换表:41357286 。


好的，我们先一步步来拆解这道题，并讲解其中涉及的知识点。  

---

## 1. 题目回顾

题目说有一个简化的 DES，明文输入 8 比特，初始置换 IP 表为：

\[
IP: \quad 2\ 6\ 3\ 1\ 4\ 8\ 5\ 7
\]

意思就是：

- 输入 8 比特：记作 \( M = a\ b\ c\ d\ e\ f\ g\ h \)（位置 1 到 8）。
- 经过 IP 置换后，输出的第 1 位来自输入的第 2 位，第 2 位来自输入的第 6 位，等等。

---

## 2. 初始置换的作用

在 DES 中，**初始置换（Initial Permutation, IP）** 是在加密开始前对输入明文做的一次固定位置重排，它不提供密码安全性，只是历史原因或硬件布线方便。

对应的 **逆初始置换（IP⁻¹）** 在加密的最后一步使用，把 IP 置换的效果还原，使得解密时能正确恢复原文。

---

## 3. 根据 IP 表推导 IP⁻¹ 表

已知：
\[
IP = (2, 6, 3, 1, 4, 8, 5, 7)
\]
这是**从原位置到新位置**的映射（按输出索引给出输入来源）。

更明确地写出来（假设原位置编号 1..8）：

输出位置 j | 来自输入位置 IP[j]
--- | ---
1 | 2
2 | 6
3 | 3
4 | 1
5 | 4
6 | 8
7 | 5
8 | 7

---

### 3.1 例子验证

原输入 \( M = a\ b\ c\ d\ e\ f\ g\ h \)（位置 1=a, 2=b, 3=c, 4=d, 5=e, 6=f, 7=g, 8=h）。

IP 置换后 \( M' \)：

- 输出 1 ← b（原位置 2）
- 输出 2 ← f（原位置 6）
- 输出 3 ← c（原位置 3）
- 输出 4 ← a（原位置 1）
- 输出 5 ← d（原位置 4）
- 输出 6 ← h（原位置 8）
- 输出 7 ← e（原位置 5）
- 输出 8 ← g（原位置 7）

所以 \( M' = b\ f\ c\ a\ d\ h\ e\ g \)，和题目中给出的 `bfcadheg` 一致。

---

### 3.2 求逆置换

逆置换 \( IP^{-1} \) 的任务是：已知 \( M' = b\ f\ c\ a\ d\ h\ e\ g \)，要还原成 \( a\ b\ c\ d\ e\ f\ g\ h \)。

我们看 \( M' \) 的第 1 位是 b（原 M 的位置 2），那么在逆置换时，**b 应该回到原位置 2**。

我们这样思考：

IP 映射是：  
原位置 \( x \) 在新排列中出现在哪个位置？

更直接的方法：  
IP 表表示：  
新位置 j 的内容来自原位置 IP[j]。

那么逆置换：  
原位置 i 的内容现在在新位置 \( IP^{-1}[i] \) 中。

---

**构造 \( IP^{-1} \) 的方法**：

IP 表：  
新 1 ← 原 2  
新 2 ← 原 6  
新 3 ← 原 3  
新 4 ← 原 1  
新 5 ← 原 4  
新 6 ← 原 8  
新 7 ← 原 5  
新 8 ← 原 7

这意味着：  
原 1 去了新 4 → \( IP^{-1}[1] = 4 \)  
原 2 去了新 1 → \( IP^{-1}[2] = 1 \)  
原 3 去了新 3 → \( IP^{-1}[3] = 3 \)  
原 4 去了新 5 → \( IP^{-1}[4] = 5 \)  
原 5 去了新 7 → \( IP^{-1}[5] = 7 \)  
原 6 去了新 2 → \( IP^{-1}[6] = 2 \)  
原 7 去了新 8 → \( IP^{-1}[7] = 8 \)  
原 8 去了新 6 → \( IP^{-1}[8] = 6 \)

所以 \( IP^{-1} \) 表（按原位置 1..8 对应的新位置排列）是：

\[
IP^{-1} = (4, 1, 3, 5, 7, 2, 8, 6)
\]

---

## 4. 检查答案

题里给的答案是 \( 4\ 1\ 3\ 5\ 7\ 2\ 8\ 6 \)，和我们算的一致。

---

## 5. 涉及的知识点

1. **置换（Permutation）**  
   在密码学中，置换就是按某种固定规则重新排列比特的位置。  
   初始置换 IP 是固定的，公开的。

2. **逆置换（Inverse Permutation）**  
   如果有一个置换 P，那么逆置换 \( P^{-1} \) 满足：  
   \( P^{-1}(P(x)) = x \)。  
   也就是先做 P 再做 \( P^{-1} \) 恢复原状。

3. **如何由 IP 求 \( IP^{-1} \)**  
   - IP 表给出的是：输出位置 j 来自输入位置 IP[j]。  
   - 那么对于原位置 i，它被移动到了某个新位置 k，即 \( IP[k] = i \)，则 \( IP^{-1}[i] = k \)。  
     简单说：如果 IP 表是 `[2,6,3,1,4,8,5,7]`，那么 IP⁻¹ 表构造方法是：  
     看数字 1 出现在 IP 的第 4 个位置 → IP⁻¹[1] = 4  
     数字 2 出现在 IP 的第 1 个位置 → IP⁻¹[2] = 1  
     数字 3 出现在 IP 的第 3 个位置 → IP⁻¹[3] = 3  
     数字 4 出现在 IP 的第 5 个位置 → IP⁻¹[4] = 5  
     数字 5 出现在 IP 的第 7 个位置 → IP⁻¹[5] = 7  
     数字 6 出现在 IP 的第 2 个位置 → IP⁻¹[6] = 2  
     数字 7 出现在 IP 的第 8 个位置 → IP⁻¹[7] = 8  
     数字 8 出现在 IP 的第 6 个位置 → IP⁻¹[8] = 6  

4. **DES 结构**  
   真实 DES 的 IP 和 IP⁻¹ 是 64 比特置换，这里是 8 比特简化教学版本，但原理完全相同。

---

## 6. 通俗总结

可以把 IP 想象成一个“座位换位游戏”：  
有 8 个位置，每个人根据 IP 表移动到新位置（比如原位置 2 的人去位置 1，原位置 6 的人去位置 2，等等）。  
逆置换 IP⁻¹ 就是游戏结束后，大家按照相反规则回到自己原来的座位。  
求 IP⁻¹ 就是根据换位规则，反推出“原来在 i 位置的人现在在哪个位置，然后让他回去”的指令表。